{"version":3,"sources":["angular-style-bindings.min.js"],"names":["angular","module","provider","this","$get","modelTemplate","minx","maxx","miny","maxy","pivotx","pivoty","styleObject","addStyle","styleName","transformFn","style","call","modelFn","delStyle","i","splice","transform","px","py","Math","min","max","forEach","value","key","modelsObj","add","name","model","copy","extend","del","get","directive","$document","StyleModelContainer","restrict","scope","link","elem","attr","trasformStyle","event","clientX","dx","clientY","dy","$apply","styleModel","detachTransform","unbind","bind","button","preventDefault"],"mappings":"AAAA,YAEAA,SAAQC,OAAO,6BAEdC,SAAS,sBAAuB,WAE/BC,KAAKC,KAAO,WAEV,GAAIC,IACFC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,OAAQ,EACRC,OAAQ,EACRC,eACAC,SAAU,SAAUC,EAAWC,GAC7BZ,KAAKS,YAAYE,IACVE,MAAOD,EAAYE,KAAK,KAAMd,KAAKO,OAAQP,KAAKQ,QAChDO,QAASH,IAGlBI,SAAU,SAAUC,GAClBjB,KAAKS,YAAYS,OAAOD,EAAG,IAE7BE,UAAW,SAAUC,EAAIC,GACnBrB,KAAKO,OAASa,EAAKE,KAAKC,IAAID,KAAKE,IAAIJ,EAAIpB,KAAKG,MAAOH,KAAKI,MAC1DJ,KAAKQ,OAASa,EAAKC,KAAKC,IAAID,KAAKE,IAAIH,EAAIrB,KAAKK,MAAOL,KAAKM,MAC9DT,QAAQ4B,QAAQzB,KAAKS,YAAa,SAAUiB,EAAOC,GACjDD,EAAa,MAAIA,EAAe,QAAEZ,KAAK,KAAMM,EAAIC,OAKjDO,IAEJ,QACGC,IAAK,SAAUC,EAAM3B,EAAMC,EAAMC,EAAMC,EAAMc,EAAIC,GAC9C,GAAIU,GAAQlC,QAAQmC,KAAK9B,EACzBL,SAAQoC,OAAOF,GAAQ5B,KAAQA,EAAMC,KAAQA,EAAMC,KAAQA,EAAMC,KAAQA,EAAMC,OAAUa,EAAIZ,OAAUa,IACvGO,EAAUE,GAAQC,GAErBG,IAAK,SAAUJ,SACLF,GAAUE,IAEpBK,IAAK,SAAUL,GACZ,MAAOF,GAAUE,QAM5BM,UAAU,uBAAwB,YAAa,sBAAuB,SAAUC,EAAWC,GAC1F,OACEC,SAAU,IACVC,OAAO,EACPC,KAAM,SAAUD,EAAOE,EAAMC,GAsBxB,QAASC,GAAcC,GACpBzB,EAAKyB,EAAMC,QAAUC,EACrB1B,EAAKwB,EAAMG,QAAUC,EACrBT,EAAMU,OAAOC,EAAWhC,UAAUC,EAAGC,IAGxC,QAAS+B,KACNf,EAAUgB,OAAO,YAAaT,GAC9BP,EAAUgB,OAAO,UAAWD,GA7B/B,GAAMD,GAAab,EAAoBH,IAAIQ,EAAKhC,WAC1CS,EAAK,EACLC,EAAK,EACL0B,EAAK,EACLE,EAAK,CAEXP,GAAKY,KAAK,YAAa,SAAUT,GACV,GAAhBA,EAAMU,SAGVV,EAAMW,iBACNnB,EAAUgB,OAAO,YAAaT,GAC9BP,EAAUgB,OAAO,UAAWD,GAC5BhC,EAAK+B,EAAW5C,OAChBc,EAAK8B,EAAW3C,OAChBuC,EAAKF,EAAMC,QAAU1B,EACrB6B,EAAKJ,EAAMG,QAAU3B,EACrBgB,EAAUiB,KAAK,YAAaV,GAC5BP,EAAUiB,KAAK,UAAWF","file":"angular-style-bindings.min.js","sourcesContent":["'use strict';\n\nangular.module('angular.style.bindings', [])\n \n.provider('StyleModelContainer', function () {\n\n  this.$get = function () {\n\n    var modelTemplate = {\n      minx: 0,\n      maxx: 0,\n      miny: 0,\n      maxy: 0,\n      pivotx: 0,\n      pivoty: 0,\n      styleObject: {},\n      addStyle: function (styleName, transformFn) {\n        this.styleObject[styleName] = {\n               style: transformFn.call(null, this.pivotx, this.pivoty), \n               modelFn: transformFn\n            };\n      },\n      delStyle: function (i) {\n        this.styleObject.splice(i, 1);\n      },\n      transform: function (px, py) {\n            this.pivotx = px = Math.min(Math.max(px, this.minx), this.maxx);\n            this.pivoty = py = Math.min(Math.max(py, this.miny), this.maxy);\n        angular.forEach(this.styleObject, function (value, key) {\n          value['style'] = value['modelFn'].call(null, px, py);\n        });\n      }\n    };\n\n      var modelsObj = {};\n\n      return {\n         add: function (name, minx, maxx, miny, maxy, px, py) {\n            var model = angular.copy(modelTemplate);\n            angular.extend(model, {'minx': minx, 'maxx': maxx, 'miny': miny, 'maxy': maxy, 'pivotx': px, 'pivoty': py});\n            modelsObj[name] = model;\n         },\n         del: function (name) {\n            delete modelsObj[name]; \n         },\n         get: function (name) {\n            return modelsObj[name];\n         }\n      }\n  };\n})   \n\n.directive('transformMultiStyle', ['$document', 'StyleModelContainer', function ($document, StyleModelContainer) {\n  return {\n    restrict: 'A',\n    scope: true,\n    link: function (scope, elem, attr) {\n         var   styleModel = StyleModelContainer.get(attr.styleName),\n               px = 0,\n               py = 0,\n               dx = 0,\n               dy = 0;\n         \n         elem.bind('mousedown', function (event) {\n            if (event.button == 2) {\n               return;\n            }\n            event.preventDefault();\n            $document.unbind('mousemove', trasformStyle);\n            $document.unbind('mouseup', detachTransform);\n            px = styleModel.pivotx;\n            py = styleModel.pivoty\n            dx = event.clientX - px;\n            dy = event.clientY - py;\n            $document.bind('mousemove', trasformStyle);\n            $document.bind('mouseup', detachTransform);\n         });\n         \n         function trasformStyle(event) {\n            px = event.clientX - dx;\n            py = event.clientY - dy;\n            scope.$apply(styleModel.transform(px,py));\n         }\n         \n         function detachTransform() {\n            $document.unbind('mousemove', trasformStyle);\n            $document.unbind('mouseup', detachTransform);\n         }\n    }\n  };\n}]);\n"],"sourceRoot":"/sources/js"}